<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline';">
    <title>SLIM Leaderboard Desktop</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Title Bar for Windows/Linux -->
        <div class="title-bar" id="title-bar">
            <div class="title-bar-text">SLIM Leaderboard Desktop</div>
        </div>

        <!-- Main Application -->
        <div class="container">
            <header class="header">
                <h1>SLIM Best Practices Leaderboard</h1>
                <p class="subtitle">Analyze GitHub repositories for SLIM best practices compliance</p>
                <button id="settings-btn" class="settings-btn" title="Settings">⚙️</button>
            </header>

            <!-- Token Setup Section (shown when no token) -->
            <section class="setup-section" id="setup-section" style="display: none;">
                <div class="setup-content">
                    <h2>Welcome to SLIM Leaderboard Desktop</h2>
                    <p>To get started, please configure your GitHub Personal Access Token:</p>
                    
                    <div class="form-group">
                        <label for="token-input" class="form-label">GitHub Personal Access Token</label>
                        <input 
                            type="password" 
                            id="token-input" 
                            class="form-input" 
                            placeholder="ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
                        >
                        <small class="form-help">
                            Your token is stored securely on your local machine. 
                            <a href="#" id="generate-token-link">Generate token on GitHub</a>
                        </small>
                    </div>
                    
                    <button id="save-token-btn" class="submit-btn">Save Token and Continue</button>
                </div>
            </section>

            <!-- Settings Modal -->
            <div class="modal" id="settings-modal" style="display: none;">
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <h2>Settings</h2>
                    
                    <div class="settings-form">
                        <div class="form-group">
                            <label class="form-label">GitHub Token Status</label>
                            <div class="token-status">
                                <span id="token-status-text">Token configured</span>
                                <button id="clear-token-btn" class="danger-btn">Clear Token</button>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Python Status</label>
                            <div id="python-status">Checking...</div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">About</label>
                            <p class="about-text">
                                SLIM Leaderboard Desktop v1.0.0<br>
                                © NASA-AMMOS<br>
                                <a href="#" id="github-link">View on GitHub</a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Analysis Section -->
            <main class="main-content" id="main-content">
                <section class="input-section">
                    <form id="repository-form" class="repo-form">
                        <div class="form-group">
                            <label for="target-type" class="form-label">Analysis Target</label>
                            <select id="target-type" name="target-type" class="form-select">
                                <option value="repository">Single Repository</option>
                                <option value="organization">Entire Organization</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="repo-url" class="form-label" id="url-label">GitHub Repository URL</label>
                            <input 
                                type="url" 
                                id="repo-url" 
                                name="repo-url" 
                                class="form-input" 
                                placeholder="https://github.com/owner/repository"
                                required
                            >
                            <small class="form-help" id="url-help">
                                Enter a GitHub repository URL
                            </small>
                        </div>
                        
                        <div class="form-group">
                            <label for="output-format" class="form-label">Output Format</label>
                            <select id="output-format" name="output-format" class="form-select">
                                <option value="TABLE">Table</option>
                                <option value="TREE">Tree</option>
                                <option value="MARKDOWN">Markdown</option>
                                <option value="PLAIN">Plain</option>
                            </select>
                        </div>

                        <div class="form-options">
                            <label class="checkbox-wrapper">
                                <input type="checkbox" id="verbose" name="verbose" class="form-checkbox">
                                <span class="checkmark"></span>
                                <span class="checkbox-label">Verbose output</span>
                            </label>
                            
                            <label class="checkbox-wrapper">
                                <input type="checkbox" id="emoji" name="emoji" class="form-checkbox">
                                <span class="checkmark"></span>
                                <span class="checkbox-label">Use emoji indicators</span>
                            </label>
                            
                            <label class="checkbox-wrapper">
                                <input type="checkbox" id="unsorted" name="unsorted" class="form-checkbox">
                                <span class="checkmark"></span>
                                <span class="checkbox-label">Don't sort results</span>
                            </label>
                        </div>

                        <button type="submit" class="submit-btn" id="analyze-btn">
                            <span class="btn-text">Analyze</span>
                            <div class="loader" id="loader" style="display: none;"></div>
                        </button>
                        
                        <div class="progress-section" id="progress-section" style="display: none;">
                            <div class="progress-bar-container">
                                <div class="progress-bar" id="progress-bar"></div>
                            </div>
                            <div class="progress-text" id="progress-text">Initializing...</div>
                        </div>
                    </form>
                </section>

                <section class="results-section" id="results-section" style="display: none;">
                    <div class="results-header">
                        <h2>Analysis Results</h2>
                        <div class="results-actions">
                            <button id="export-results" class="action-btn">Export</button>
                            <button id="clear-results" class="clear-btn">Clear</button>
                        </div>
                    </div>
                    <div class="results-content" id="results-content"></div>
                </section>

                <section class="error-section" id="error-section" style="display: none;">
                    <div class="error-content">
                        <h3>Error</h3>
                        <p id="error-message"></p>
                    </div>
                </section>
            </main>

            <footer class="footer">
                <p>Powered by <a href="#" id="slim-link">SLIM</a> • NASA-AMMOS</p>
            </footer>
        </div>
    </div>

    <script src="renderer.js"></script>
</body>
</html>